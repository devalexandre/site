<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#"><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <title>Moleculer Go - Progressive microservices framework in Go</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="keywords" content="microservices, nodejs, node.js, javascript, github, opensource, framework, moleculer, github, scaling">
  <meta name="description" content="Moleculer is a fast, scalable and powerful microservices framework for Node.js.">
  <meta name="robots" content="index, follow">
  <!-- Canonical links -->
  <link rel="canonical" href="https://gomicro.services/docs/0.1/fault-tolerance.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="en" href="https://gomicro.services/docs/0.1/fault-tolerance.html">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/moleculer.css -->
  <link rel="stylesheet" href="/css/moleculer.css">
  <!-- endbuild -->
  <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700|Roboto Mono|Lato:300,400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
  <!-- RSS
  <link rel="alternate" href="/atom.xml" title="Moleculer Go - Progressive microservices framework in Go">
  -->
  <!-- Open Graph -->
  <meta name="description" content="Fault tolerance WIP Documentation This documentation is still a working in progress and this page has not been fully converted yet :( We are working on top of the existing Moleculer JS documentation,">
<meta property="og:type" content="website">
<meta property="og:title" content="Moleculer Go - Progressive microservices framework in Go">
<meta property="og:url" content="https://gomicro.services/docs/0.1/fault-tolerance.html">
<meta property="og:site_name" content="Moleculer Go - Progressive microservices framework in Go">
<meta property="og:description" content="Fault tolerance WIP Documentation This documentation is still a working in progress and this page has not been fully converted yet :( We are working on top of the existing Moleculer JS documentation,">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://gomicro.services/docs/0.1/assets/under_construction.png">
<meta property="og:updated_time" content="2019-04-22T02:48:05.047Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Moleculer Go - Progressive microservices framework in Go">
<meta name="twitter:description" content="Fault tolerance WIP Documentation This documentation is still a working in progress and this page has not been fully converted yet :( We are working on top of the existing Moleculer JS documentation,">
<meta name="twitter:image" content="https://gomicro.services/docs/0.1/assets/under_construction.png">
<meta name="twitter:site" content="MoleculerG">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-99099811-1', 'auto');
  ga('send', 'pageview');
</script>


  <!-- Particles -->
  <script src="/js/buttons.js"></script>

</head>

<body>
  <div id="particles-js"></div>
  <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/" id="logo">Moleculer</a>
    </h1>
    <nav id="main-nav">
      <a href="/docs/0.1/" class="main-nav-link">Documentation</a><a href="/modules.html" class="main-nav-link">Modules</a><a href="/support.html" class="main-nav-link">Support</a>
      <a href="https://github.com/moleculer-go/moleculer" class="main-nav-link">Github</a>
      <a href="https://gitter.im/moleculer-go/moleculer" class="main-nav-link">Chat</a>
      <a href="https://medium.com/moleculer" class="main-nav-link">Blog</a>
      <div id="search-input-wrap" class="on">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <div id="lang-select-wrap" style="display: none">
      <label id="lang-select-label"><i class="fa fa-globe"></i><span>English</span></label>
      <select id="lang-select" data-canonical="">
        
          <option value="en" selected>English</option>
        
      </select>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

  <div id="container">
    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope="" itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <div class="article-content" itemprop="articleBody">
                <a href="https://github.com/moleculer-go/site/edit/master/source/docs/0.1/fault-tolerance.md" class="corner-right article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a>
                <h1 id="Fault-tolerance" class="article-heading"><a href="#Fault-tolerance" class="headerlink" title="Fault tolerance"></a>Fault tolerance<a class="article-anchor" href="#Fault-tolerance" aria-hidden="true"></a></h1><hr>
<blockquote class="note info"><strong class="note-title">WIP Documentation</strong><p><img src="assets/under_construction.png" width="150/"></p>
<p>This documentation is still a working in progress and this page has not been fully converted yet :(</p>
<p>We are working on top of the existing Moleculer JS documentation, and that is why you might see pages with some JavaScript :)</p>
</blockquote>
<h2 id="Circuit-Breaker" class="article-heading"><a href="#Circuit-Breaker" class="headerlink" title="Circuit Breaker"></a>Circuit Breaker<a class="article-anchor" href="#Circuit-Breaker" aria-hidden="true"></a></h2><p>The Moleculer has a built-in circuit-breaker solution. It is a threshold-based implementation. It uses a time window to check the failed request rate. Once the threshold value is reached, it trips the circuit breaker.</p>
<blockquote class="note info"><strong class="note-title">What is the circuit breaker?</strong><p>The Circuit Breaker can prevent an application from repeatedly trying to execute an operation thatâ€™s likely to fail. Allowing it to continue without waiting for the fault to be fixed or wasting CPU cycles while it determines that the fault is long lasting. The Circuit Breaker pattern also enables an application to detect whether the fault has been resolved. If the problem appears to have been fixed, the application can try to invoke the operation.</p>
<p>Read more about circuit breaker on <a href="https://martinfowler.com/bliki/CircuitBreaker.html" target="_blank" rel="noopener">Martin Fowler blog</a> or on <a href="https://docs.microsoft.com/azure/architecture/patterns/circuit-breaker" target="_blank" rel="noopener">Microsoft Azure Docs</a>.</p>
</blockquote>
<p>If you enable it, all service calls will be protected by this built-in circuit breaker.</p>
<p><strong>Enable it in the broker options</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    circuitBreaker: &#123;</span><br><span class="line">        enabled: <span class="literal">true</span>,</span><br><span class="line">        threshold: <span class="number">0.5</span>,</span><br><span class="line">        minRequestCount: <span class="number">20</span>,</span><br><span class="line">        windowTime: <span class="number">60</span>, <span class="comment">// in seconds</span></span><br><span class="line">        halfOpenTime: <span class="number">5</span> * <span class="number">1000</span>, <span class="comment">// in milliseconds</span></span><br><span class="line">        check: <span class="function"><span class="params">err</span> =&gt;</span> err &amp;&amp; err.code &gt;= <span class="number">500</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Settings" class="article-heading"><a href="#Settings" class="headerlink" title="Settings"></a>Settings<a class="article-anchor" href="#Settings" aria-hidden="true"></a></h3><table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td><code>Boolean</code></td>
<td><code>false</code></td>
<td>Enable feature</td>
</tr>
<tr>
<td><code>threshold</code></td>
<td><code>Number</code></td>
<td><code>0.5</code></td>
<td>Threshold value. <code>0.5</code> means that 50% should be failed for tripping.</td>
</tr>
<tr>
<td><code>minRequestCount</code></td>
<td><code>Number</code></td>
<td><code>20</code></td>
<td>Minimum request count. Below it, CB does not trip.</td>
</tr>
<tr>
<td><code>windowTime</code></td>
<td><code>Number</code></td>
<td><code>60</code></td>
<td>Number of seconds for time window.</td>
</tr>
<tr>
<td><code>halfOpenTime</code></td>
<td><code>Number</code></td>
<td><code>10000</code></td>
<td>Number of milliseconds to switch from <code>open</code> to <code>half-open</code> state</td>
</tr>
<tr>
<td><code>check</code></td>
<td><code>Function</code></td>
<td><code>err &amp;&amp; err.code &gt;= 500</code></td>
<td>A function to check failed requests.</td>
</tr>
</tbody>
</table>
<blockquote>
<p>If the circuit-breaker state is changed, ServiceBroker will send <a href="events.html#Internal-events">internal events</a>.</p>
</blockquote>
<p>These global options can be overridden in action definition, as well.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// users.service.js</span></span><br><span class="line"><span class="built_in">module</span>.export = &#123;</span><br><span class="line">    name: <span class="string">"users"</span>,</span><br><span class="line">    actions: &#123;</span><br><span class="line">        create: &#123;</span><br><span class="line">            circuitBreaker: &#123;</span><br><span class="line">                <span class="comment">// All CB options can be overwritten from broker options.</span></span><br><span class="line">                threshold: <span class="number">0.3</span>,</span><br><span class="line">                windowTime: <span class="number">30</span></span><br><span class="line">            &#125;,</span><br><span class="line">            handler(ctx) &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="Retry" class="article-heading"><a href="#Retry" class="headerlink" title="Retry"></a>Retry<a class="article-anchor" href="#Retry" aria-hidden="true"></a></h2><p>There is an exponential backoff retry solution. It can recall failed requests.</p>
<p><strong>Enable it in the broker options</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    retryPolicy: &#123;</span><br><span class="line">        enabled: <span class="literal">true</span>,</span><br><span class="line">        retries: <span class="number">5</span>,</span><br><span class="line">        delay: <span class="number">100</span>,</span><br><span class="line">        maxDelay: <span class="number">2000</span>,</span><br><span class="line">        factor: <span class="number">2</span>,</span><br><span class="line">        check: <span class="function"><span class="params">err</span> =&gt;</span> err &amp;&amp; !!err.retryable</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Settings-1" class="article-heading"><a href="#Settings-1" class="headerlink" title="Settings"></a>Settings<a class="article-anchor" href="#Settings-1" aria-hidden="true"></a></h3><table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td><code>Boolean</code></td>
<td><code>false</code></td>
<td>Enable feature.</td>
</tr>
<tr>
<td><code>retries</code></td>
<td><code>Number</code></td>
<td><code>5</code></td>
<td>Count of retries.</td>
</tr>
<tr>
<td><code>delay</code></td>
<td><code>Number</code></td>
<td><code>100</code></td>
<td>First delay in milliseconds.</td>
</tr>
<tr>
<td><code>maxDelay</code></td>
<td><code>Number</code></td>
<td><code>2000</code></td>
<td>Maximum delay in milliseconds.</td>
</tr>
<tr>
<td><code>factor</code></td>
<td><code>Number</code></td>
<td><code>2</code></td>
<td>Backoff factor for delay. <code>2</code> means exponential backoff.</td>
</tr>
<tr>
<td><code>check</code></td>
<td><code>Function</code></td>
<td><code>err &amp;&amp; !!err.retryable</code></td>
<td>A function to check failed requests.</td>
</tr>
</tbody>
</table>
<p><strong>Overwrite the retries value in calling option</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">broker.call(<span class="string">"posts.find"</span>, &#123;&#125;, &#123; <span class="attr">retries</span>: <span class="number">3</span> &#125;);</span><br></pre></td></tr></table></figure>
<p><strong>Overwrite the retry policy values in action definitions</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// users.service.js</span></span><br><span class="line"><span class="built_in">module</span>.export = &#123;</span><br><span class="line">    name: <span class="string">"users"</span>,</span><br><span class="line">    actions: &#123;</span><br><span class="line">        find: &#123;</span><br><span class="line">            retryPolicy: &#123;</span><br><span class="line">                <span class="comment">// All Retry policy options can be overwritten from broker options.</span></span><br><span class="line">                retries: <span class="number">3</span>,</span><br><span class="line">                delay: <span class="number">500</span></span><br><span class="line">            &#125;,</span><br><span class="line">            handler(ctx) &#123;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        create: &#123;</span><br><span class="line">            retryPolicy: &#123;</span><br><span class="line">                <span class="comment">// Disable retries for this action</span></span><br><span class="line">                enabled: <span class="literal">false</span></span><br><span class="line">            &#125;,</span><br><span class="line">            handler(ctx) &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="Timeout" class="article-heading"><a href="#Timeout" class="headerlink" title="Timeout"></a>Timeout<a class="article-anchor" href="#Timeout" aria-hidden="true"></a></h2><p>Timeout can be set for service calling. It can be set globally in broker options, or in calling options.<br>If timeout is defined and request is timed out, broker will throw a <code>RequestTimeoutError</code> error.</p>
<p><strong>Enable it in the broker options</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    requestTimeout: <span class="number">5</span> * <span class="number">1000</span> <span class="comment">// in seconds</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>Overwrite the timeout value in calling option</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">broker.call(<span class="string">"posts.find"</span>, &#123;&#125;, &#123; <span class="attr">timeout</span>: <span class="number">3000</span> &#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Distributed-timeouts" class="article-heading"><a href="#Distributed-timeouts" class="headerlink" title="Distributed timeouts"></a>Distributed timeouts<a class="article-anchor" href="#Distributed-timeouts" aria-hidden="true"></a></h3><p>Moleculer uses <a href="https://www.datawire.io/guide/traffic/deadlines-distributed-timeouts-microservices/" target="_blank" rel="noopener">distributed timeouts</a>. In case of nested calls, the timeout value is decremented with the elapsed time. If the timeout value is less or equal than 0, the next nested calls will be skipped (<code>RequestSkippedError</code>) because the first call has already been rejected with a <code>RequestTimeoutError</code> error.</p>
<h2 id="Bulkhead" class="article-heading"><a href="#Bulkhead" class="headerlink" title="Bulkhead"></a>Bulkhead<a class="article-anchor" href="#Bulkhead" aria-hidden="true"></a></h2><p>Bulkhead feature is implemented in Moleculer framework to control the concurrent request handling of actions.</p>
<p><strong>Enable it in the broker options</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> broker = <span class="keyword">new</span> ServiceBroker(&#123;</span><br><span class="line">    bulkhead: &#123;</span><br><span class="line">        enabled: <span class="literal">true</span>,</span><br><span class="line">        concurrency: <span class="number">3</span>,</span><br><span class="line">        maxQueueSize: <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Settings-2" class="article-heading"><a href="#Settings-2" class="headerlink" title="Settings"></a>Settings<a class="article-anchor" href="#Settings-2" aria-hidden="true"></a></h3><table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td><code>Boolean</code></td>
<td><code>false</code></td>
<td>Enable feature.</td>
</tr>
<tr>
<td><code>concurreny</code></td>
<td><code>Number</code></td>
<td><code>3</code></td>
<td>Maximum concurrent executions.</td>
</tr>
<tr>
<td><code>maxQueueSize</code></td>
<td><code>Number</code></td>
<td><code>10</code></td>
<td>Maximum size of queue</td>
</tr>
</tbody>
</table>
<p>The <code>concurrency</code> value restricts the concurrent request executions. If the <code>maxQueueSize</code> is bigger than <code>0</code>, broker stores the additional requests in a queue if all slots are taken. If the queue size reaches the <code>maxQueueSize</code> limit or it is 0, broker will throw <code>QueueIsFull</code> exception for every addition requests.</p>
<p>These global options can be overridden in action definition, as well.</p>
<p><strong>Overwrite the retry policy values in action definitions</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// users.service.js</span></span><br><span class="line"><span class="built_in">module</span>.export = &#123;</span><br><span class="line">    name: <span class="string">"users"</span>,</span><br><span class="line">    actions: &#123;</span><br><span class="line">        find: &#123;</span><br><span class="line">            bulkhead: &#123;</span><br><span class="line">                enabled: <span class="literal">false</span></span><br><span class="line">            &#125;,</span><br><span class="line">            handler(ctx) &#123;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        create: &#123;</span><br><span class="line">            bulkhead: &#123;</span><br><span class="line">                <span class="comment">// Increment the concurrency value</span></span><br><span class="line">                <span class="comment">// for this action</span></span><br><span class="line">                concurrency: <span class="number">10</span></span><br><span class="line">            &#125;,</span><br><span class="line">            handler(ctx) &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="Fallback" class="article-heading"><a href="#Fallback" class="headerlink" title="Fallback"></a>Fallback<a class="article-anchor" href="#Fallback" aria-hidden="true"></a></h2><p>Fallback feature is useful, when you donâ€™t want to give back errors to the users. Instead, call an other action or return some common content.<br>Fallback response can be set in calling options or in action definition. It should be a <code>Function</code> which returns a <code>Promise</code> with any content. The broker passes the current <code>Context</code> &amp; <code>Error</code> objects to this function as arguments.</p>
<p><strong>Fallback response setting in calling options</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> result = <span class="keyword">await</span> broker.call(</span><br><span class="line">    <span class="string">"users.recommendation"</span>,</span><br><span class="line">    &#123; <span class="attr">userID</span>: <span class="number">5</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        timeout: <span class="number">500</span>,</span><br><span class="line">        fallbackResponse(ctx, err) &#123;</span><br><span class="line">            <span class="comment">// Return a common response from cache</span></span><br><span class="line">            <span class="keyword">return</span> broker.cacher.get(</span><br><span class="line">                <span class="string">"users.fallbackRecommendation:"</span> + ctx.params.userID</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="Fallback-in-action-definition" class="article-heading"><a href="#Fallback-in-action-definition" class="headerlink" title="Fallback in action definition"></a>Fallback in action definition<a class="article-anchor" href="#Fallback-in-action-definition" aria-hidden="true"></a></h3><p>Fallback response can be also defined in receiver-side, in action definition.</p>
<blockquote>
<p>Please note, this fallback response will only be used if the error occurs within action handler. If the request is called from a remote node and the request is timed out on the remote node, the fallback response is not be used. In this case, use the <code>fallbackResponse</code> in calling option.</p>
</blockquote>
<p><strong>Fallback as a function</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    name: <span class="string">"recommends"</span>,</span><br><span class="line">    actions: &#123;</span><br><span class="line">        add: &#123;</span><br><span class="line">            fallback: <span class="function">(<span class="params">ctx, err</span>) =&gt;</span> <span class="string">"Some cached result"</span>,</span><br><span class="line">            <span class="comment">//fallback: "fakeResult",</span></span><br><span class="line">            handler(ctx) &#123;</span><br><span class="line">                <span class="comment">// Do something</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>Fallback as method name string</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    name: <span class="string">"recommends"</span>,</span><br><span class="line">    actions: &#123;</span><br><span class="line">        add: &#123;</span><br><span class="line">            <span class="comment">// Call the 'getCachedResult' method when error occurred</span></span><br><span class="line">            fallback: <span class="string">"getCachedResult"</span>,</span><br><span class="line">            handler(ctx) &#123;</span><br><span class="line">                <span class="comment">// Do something</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    methods: &#123;</span><br><span class="line">        getCachedResult(ctx, err) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"Some cached result"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2019-04-22T02:48:05.047Z" itemprop="dateModified">Last updated: 2019-04-22</time>
                <a href="balancing.html" class="article-footer-prev" title="Load balancing"><i class="fa fa-chevron-left"></i><span>Prev</span></a><a href="caching.html" class="article-footer-next" title="Caching"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Fault-tolerance"><span class="toc-text">Fault tolerance</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Circuit-Breaker"><span class="toc-text">Circuit Breaker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Settings"><span class="toc-text">Settings</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Retry"><span class="toc-text">Retry</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Settings-1"><span class="toc-text">Settings</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Timeout"><span class="toc-text">Timeout</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Distributed-timeouts"><span class="toc-text">Distributed timeouts</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bulkhead"><span class="toc-text">Bulkhead</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Settings-2"><span class="toc-text">Settings</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Fallback"><span class="toc-text">Fallback</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Fallback-in-action-definition"><span class="toc-text">Fallback in action definition</span></a></li></ol></li></ol></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner"><div class="version-selector"><select onchange="changeVersion(this)"><option value="docs/0.1" selected>v0.1</option></select></div><strong class="sidebar-title">Introduction</strong><a href="/docs/0.1/index.html" class="sidebar-link">What is Moleculer?</a><a href="/docs/0.1/usage.html" class="sidebar-link">Usage</a><a href="/docs/0.1/examples.html" class="sidebar-link">Examples</a><strong class="sidebar-title">Overview</strong><a href="/docs/0.1/broker.html" class="sidebar-link">Broker</a><a href="/docs/0.1/services.html" class="sidebar-link">Services</a><a href="/docs/0.1/actions.html" class="sidebar-link">Actions</a><a href="/docs/0.1/events.html" class="sidebar-link">Events</a><a href="/docs/0.1/lifecycle.html" class="sidebar-link">Lifecycles</a><a href="/docs/0.1/logging.html" class="sidebar-link">Logging</a><a href="/docs/0.1/middlewares.html" class="sidebar-link">Middlewares</a><a href="/docs/0.1/networking.html" class="sidebar-link">Networking</a><a href="/docs/0.1/registry.html" class="sidebar-link">Discovery & Registry</a><a href="/docs/0.1/balancing.html" class="sidebar-link">Load balancing</a><a href="/docs/0.1/fault-tolerance.html" class="sidebar-link current">Fault tolerance</a><a href="/docs/0.1/caching.html" class="sidebar-link">Caching</a><a href="/docs/0.1/validating.html" class="sidebar-link">Validating</a><a href="/docs/0.1/metrics.html" class="sidebar-link">Metrics & Tracing</a><a href="/docs/0.1/errors.html" class="sidebar-link">Errors</a><a href="/docs/0.1/runner.html" class="sidebar-link">Moleculer Runner</a><strong class="sidebar-title">Modules</strong><a href="/docs/0.1/moleculer-web.html" class="sidebar-link">API Gateway</a><a href="/docs/0.1/moleculer-repl.html" class="sidebar-link">REPL console</a><a href="/docs/0.1/moleculer-cli.html" class="sidebar-link">CLI Tool</a><a href="/docs/0.1/moleculer-db.html" class="sidebar-link">DB Adapters</a><a href="/modules.html" class="sidebar-link">All modules</a><strong class="sidebar-title">Miscellaneous</strong><a href="/docs/0.1/clustering.html" class="sidebar-link">Clustering</a><a href="/docs/0.1/deploying.html" class="sidebar-link">Deploying</a><a href="/docs/0.1/benchmark.html" class="sidebar-link">Benchmark</a><a href="/docs/0.1/faq.html" class="sidebar-link">FAQ</a><a href="/docs/0.1/contributing.html" class="sidebar-link">Contributing</a><strong class="sidebar-title">API</strong><a href="/docs/0.1/api/service-broker.html" class="sidebar-link">ServiceBroker</a><a href="/docs/0.1/api/service.html" class="sidebar-link">Service</a><a href="/docs/0.1/api/context.html" class="sidebar-link">Context</a><a href="/docs/0.1/api/protocol.html" class="sidebar-link">Protocol</a></div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      Copyright &copy; 2018-2019 <a href="https://github.com/pentateu" target="_blank">MoleculerGO</a><br>
      Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank">CC BY 4.0</a>.
    </div>
    <div id="footer-links">
      <a href="https://gitter.im/moleculer-go/moleculer" class="footer-link" target="_blank"><i class="fa fa-comments-o"></i></a>
      <a href="https://twitter.com/MoleculerG" class="footer-link" target="_blank"><i class="fa fa-twitter"></i></a>
      <a href="https://github.com/moleculer-go/moleculer" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
      <a href="https://stackoverflow.com/questions/tagged/moleculer-go" class="footer-link" target="_blank"><i class="fa fa-stack-overflow"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/docs/0.1/" class="mobile-nav-link">Documentation</a><a href="/modules.html" class="mobile-nav-link">Modules</a><a href="/support.html" class="mobile-nav-link">Support</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/moleculer-go/moleculer" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <div class="version-selector"><select onchange="changeVersion(this)"><option value="docs/0.1" selected>v0.1</option></select></div><strong class="mobile-nav-title">Introduction</strong><a href="/docs/0.1/index.html" class="mobile-nav-link">What is Moleculer?</a><a href="/docs/0.1/usage.html" class="mobile-nav-link">Usage</a><a href="/docs/0.1/examples.html" class="mobile-nav-link">Examples</a><strong class="mobile-nav-title">Overview</strong><a href="/docs/0.1/broker.html" class="mobile-nav-link">Broker</a><a href="/docs/0.1/services.html" class="mobile-nav-link">Services</a><a href="/docs/0.1/actions.html" class="mobile-nav-link">Actions</a><a href="/docs/0.1/events.html" class="mobile-nav-link">Events</a><a href="/docs/0.1/lifecycle.html" class="mobile-nav-link">Lifecycles</a><a href="/docs/0.1/logging.html" class="mobile-nav-link">Logging</a><a href="/docs/0.1/middlewares.html" class="mobile-nav-link">Middlewares</a><a href="/docs/0.1/networking.html" class="mobile-nav-link">Networking</a><a href="/docs/0.1/registry.html" class="mobile-nav-link">Discovery & Registry</a><a href="/docs/0.1/balancing.html" class="mobile-nav-link">Load balancing</a><a href="/docs/0.1/fault-tolerance.html" class="mobile-nav-link current">Fault tolerance</a><a href="/docs/0.1/caching.html" class="mobile-nav-link">Caching</a><a href="/docs/0.1/validating.html" class="mobile-nav-link">Validating</a><a href="/docs/0.1/metrics.html" class="mobile-nav-link">Metrics & Tracing</a><a href="/docs/0.1/errors.html" class="mobile-nav-link">Errors</a><a href="/docs/0.1/runner.html" class="mobile-nav-link">Moleculer Runner</a><strong class="mobile-nav-title">Modules</strong><a href="/docs/0.1/moleculer-web.html" class="mobile-nav-link">API Gateway</a><a href="/docs/0.1/moleculer-repl.html" class="mobile-nav-link">REPL console</a><a href="/docs/0.1/moleculer-cli.html" class="mobile-nav-link">CLI Tool</a><a href="/docs/0.1/moleculer-db.html" class="mobile-nav-link">DB Adapters</a><a href="/modules.html" class="mobile-nav-link">All modules</a><strong class="mobile-nav-title">Miscellaneous</strong><a href="/docs/0.1/clustering.html" class="mobile-nav-link">Clustering</a><a href="/docs/0.1/deploying.html" class="mobile-nav-link">Deploying</a><a href="/docs/0.1/benchmark.html" class="mobile-nav-link">Benchmark</a><a href="/docs/0.1/faq.html" class="mobile-nav-link">FAQ</a><a href="/docs/0.1/contributing.html" class="mobile-nav-link">Contributing</a><strong class="mobile-nav-title">API</strong><a href="/docs/0.1/api/service-broker.html" class="mobile-nav-link">ServiceBroker</a><a href="/docs/0.1/api/service.html" class="mobile-nav-link">Service</a><a href="/docs/0.1/api/context.html" class="mobile-nav-link">Context</a><a href="/docs/0.1/api/protocol.html" class="mobile-nav-link">Protocol</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- build:js build/js/main.js -->
<script src="/js/lang_select.js"></script>
<script src="/js/version_select.js"></script>
<script src="/js/scrollingelement.js"></script>
<script src="/js/toc.js"></script>
<script src="/js/mobile_nav.js"></script>
<!-- endbuild -->
<script src="https://cdn.jsdelivr.net/retinajs/1.3.0/retina.min.js" async></script>

<!-- Algolia -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: '7d5514b7c3e161a428f04f33ba1bdab4',
indexName: 'moleculer',
inputSelector: '#search-input',
algoliaOptions: { 'facetFilters': ["version:0.1"] },
debug: false // Set debug to true if you want to inspect the dropdown
});
</script>


<!-- fastclick -->
<script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  FastClick.attach(document.body)
}, false)
</script>

<!-- Gitter Chat -->
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'moleculer-go/moleculer'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
</body>
</html>